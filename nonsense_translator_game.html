<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç„¡æ„å‘³ç¿»è¨³æ—¥è¨˜</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #f5576c);
            background-size: 400% 400%;
            animation: gradientShift 10s ease infinite;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(15px);
        }

        h1 {
            text-align: center;
            color: #333;
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            text-align: center;
            color: #666;
            font-size: 1.2em;
            margin-bottom: 30px;
            font-style: italic;
        }

        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: rgba(0, 0, 0, 0.03);
            border-radius: 15px;
            border: 2px solid rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            color: #444;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .daily-challenge {
            background: linear-gradient(135deg, #ffeaa7, #fab1a0);
            border: 3px solid #fdcb6e;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
        }

        .daily-challenge::before {
            content: "ğŸ“… ä»Šæ—¥ã®ãŠé¡Œ";
            position: absolute;
            top: -15px;
            left: 20px;
            background: #e17055;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }

        .practice-mode {
            background: linear-gradient(135deg, #a8e6cf, #88d8c0);
            border: 3px solid #55a3ff;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
        }

        .practice-mode::before {
            content: "ğŸ¯ ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰";
            position: absolute;
            top: -15px;
            left: 20px;
            background: #0984e3;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }

        .nonsense-text {
            background: #ffe6e6;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
            border: 2px dashed #ff6b6b;
            line-height: 1.6;
            font-size: 16px;
        }

        .translation-input {
            width: 100%;
            min-height: 120px;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            line-height: 1.6;
            resize: vertical;
            font-family: inherit;
            box-sizing: border-box;
        }

        .translation-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .btn {
            display: inline-block;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: bold;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
        }

        .btn-success {
            background: linear-gradient(45deg, #28a745, #20c997);
        }

        .btn-info {
            background: linear-gradient(45deg, #17a2b8, #138496);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #6c757d, #495057);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .status-bar {
            background: rgba(0, 0, 0, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .status-item {
            font-size: 14px;
            color: #666;
            margin: 5px;
        }

        .status-item strong {
            color: #333;
        }

        .limit-warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
        }

        .success-message {
            background: #d1edff;
            border: 2px solid #0984e3;
            color: #0984e3;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .history-entry {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .history-date {
            font-size: 12px;
            color: #666;
            margin-bottom: 10px;
        }

        .history-original {
            font-size: 14px;
            color: #999;
            margin-bottom: 10px;
            font-style: italic;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
        }

        .history-translation {
            font-size: 16px;
            line-height: 1.6;
            color: #333;
        }

        .tab-container {
            margin-bottom: 20px;
        }

        .tab-buttons {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 20px;
        }

        .tab-btn {
            padding: 12px 25px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 16px;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: bold;
        }

        .tab-btn:hover {
            color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .empty-state {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 40px;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .instruction {
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“– ç„¡æ„å‘³ç¿»è¨³æ—¥è¨˜</h1>
        <p class="subtitle">æ¯æ—¥ã®ç„¡æ„å‘³ã‚’ã€ç¾ã—ã„ç‰©èªã«</p>

        <div class="instruction">
            <strong>ä½¿ã„æ–¹ï¼š</strong> æ¯æ—¥æ–°ã—ã„ç„¡æ„å‘³æ–‡ç« ãŒå‡ºé¡Œã•ã‚Œã¾ã™ã€‚1æ—¥3å›ã¾ã§ç¿»è¨³ã‚’æŠ•ç¨¿ã§ãã¾ã™ã€‚ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰ã§ã¯ç„¡åˆ¶é™ã«ç·´ç¿’ã§ãã¾ã™ã€‚ã‚ãªãŸã®ç¿»è¨³ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã«ä¿å­˜ã•ã‚Œã€SNSã§ã‚·ã‚§ã‚¢ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚<br>
            <em>â€» ãƒšãƒ¼ã‚¸ã‚’é–‰ã˜ã‚‹ã¨ç¿»è¨³å±¥æ­´ã¯æ¶ˆãˆã¾ã™ã€‚å¤§åˆ‡ãªç¿»è¨³ã¯ã€Œã‚³ãƒ”ãƒ¼ã€ã‚„ã€ŒXã§ã‚·ã‚§ã‚¢ã€ã§ä¿å­˜ã—ã¦ãã ã•ã„ã€‚</em>
        </div>

        <div class="status-bar">
            <div class="status-item">
                <strong>ä»Šæ—¥:</strong> <span id="current-date"></span>
            </div>
            <div class="status-item">
                <strong>æ®‹ã‚ŠæŠ•ç¨¿æ•°:</strong> <span id="remaining-posts">3</span>/3
            </div>
            <div class="status-item">
                <strong>ç·ç¿»è¨³æ•°:</strong> <span id="total-translations">0</span>
            </div>
        </div>

        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="switchTab('daily')">ä»Šæ—¥ã®ãŠé¡Œ</button>
                <button class="tab-btn" onclick="switchTab('practice')">ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰</button>
                <button class="tab-btn" onclick="switchTab('history')">ç¿»è¨³å±¥æ­´</button>
            </div>

            <!-- ä»Šæ—¥ã®ãŠé¡Œã‚¿ãƒ– -->
            <div class="tab-content active" id="daily-tab">
                <div class="daily-challenge">
                    <div class="nonsense-text" id="daily-challenge-text">
                        èª­ã¿è¾¼ã¿ä¸­...
                    </div>
                    <div id="daily-limit-warning" class="limit-warning" style="display: none;">
                        ä»Šæ—¥ã®æŠ•ç¨¿ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚æ˜æ—¥ã¾ãŸæ–°ã—ã„ãŠé¡Œã§æŒ‘æˆ¦ã—ã¦ãã ã•ã„ï¼
                    </div>
                    <div id="daily-success-message" class="success-message" style="display: none;">
                        ç¿»è¨³ã‚’æŠ•ç¨¿ã—ã¾ã—ãŸï¼ç´ æ™´ã‚‰ã—ã„ä½œå“ã§ã™ã­ï¼
                    </div>
                    <textarea class="translation-input" id="daily-translation" placeholder="ã“ã“ã«ç¿»è¨³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                    <div class="share-buttons">
                        <button class="btn btn-success" id="submit-daily-btn" onclick="submitDailyTranslation()">ç¿»è¨³ã‚’æŠ•ç¨¿</button>
                        <button class="btn btn-info" onclick="copyDailyChallenge()">ãŠé¡Œã‚’ã‚³ãƒ”ãƒ¼</button>
                        <button class="btn btn-info" onclick="shareDailyToTwitter()">Xã§ã‚·ã‚§ã‚¢</button>
                    </div>
                </div>
            </div>

            <!-- ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰ã‚¿ãƒ– -->
            <div class="tab-content" id="practice-tab">
                <div class="practice-mode">
                    <div class="nonsense-text" id="practice-text">
                        ã€Œç·´ç¿’ç”¨ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„
                    </div>
                    <button class="btn btn-primary" onclick="generatePracticeText()">ç·´ç¿’ç”¨ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ</button>
                    <button class="btn btn-info" onclick="copyPracticeText()">ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼</button>
                    <textarea class="translation-input" id="practice-translation" placeholder="ç·´ç¿’ç”¨ã®ç¿»è¨³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...è‡ªç”±ã«ä½•åº¦ã§ã‚‚è©¦ã›ã¾ã™ï¼"></textarea>
                    <div class="share-buttons">
                        <button class="btn btn-secondary" onclick="savePracticeTranslation()">ç·´ç¿’ã¨ã—ã¦ä¿å­˜</button>
                        <button class="btn btn-info" onclick="copyPracticeTranslation()">ç¿»è¨³ã‚’ã‚³ãƒ”ãƒ¼</button>
                        <button class="btn btn-info" onclick="sharePracticeToTwitter()">Xã§ã‚·ã‚§ã‚¢</button>
                    </div>
                </div>
            </div>

            <!-- ç¿»è¨³å±¥æ­´ã‚¿ãƒ– -->
            <div class="tab-content" id="history-tab">
                <div class="section">
                    <h2>ğŸ“š ã‚ãªãŸã®ç¿»è¨³å±¥æ­´</h2>
                    <div id="translation-history">
                        <div class="empty-state">
                            ã¾ã ç¿»è¨³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æœ€åˆã®ç¿»è¨³ã‚’æŠ•ç¨¿ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ãƒ‡ãƒ¼ã‚¿ç®¡ç†
        let dailyLimit = 3;
        let currentDailyText = '';
        let currentPracticeText = '';

        // ã‚ãªãŸã®ç”Ÿæˆå™¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        const subjects = [
            'ã‚ãŸãã—', 'æœº', 'ãƒãƒ ã‚¹ã‚¿ãƒ¼', 'ç«æ›œæ—¥', 'ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰', 'ãƒ•ã‚¡ã‚¤ãƒ«', 'ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼',
            'é›»è©±', 'é´ä¸‹', 'æ•°å­—', 'ã‚µãƒ³ãƒ‰ã‚¤ãƒƒãƒ', 'ã‚¹ãƒ—ãƒ¼ãƒ³', 'æ¤…å­', 'æ™‚é–“', 'çŒ«', 'å†·è”µåº«',
            'çª“', 'å¤¢', 'ã‚¨ãƒ©ãƒ¼', 'ç”»é¢', 'ãƒã‚¦ã‚¹', 'ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰', 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹', 'ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©',
            'æœˆæ›œæ—¥', 'ç²˜åœŸ', 'ã‚«ãƒ¼ã‚½ãƒ«', 'æƒ…å ±', 'é­š', 'ã‚½ãƒ•ã‚¡ãƒ¼', 'ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«', 'æ¦‚å¿µ',
            'æ­¯è»Š', 'åŒ‚ã„', 'ãƒ—ãƒ­ã‚°ãƒ©ãƒ ', 'é³¥', 'æ–‡å­—', 'AI', 'å›³æ›¸é¤¨', 'ãƒã‚°', 'ç¿»è¨³è€…',
            'è¨˜æ†¶', 'å½±', 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼', 'ãƒœã‚¿ãƒ³', 'éšæ®µ', 'æ‰‰', 'éµ', 'ãƒ‘ãƒ³', 'å‚˜', 'é¡', 
            'æ™‚è¨ˆ', 'æœ¬', 'ãƒšãƒ³', 'ç´™', 'ç®±', 'è¢‹', 'é´', 'å¸½å­', 'ã‚³ãƒƒãƒ—', 'çš¿',
            'èŠ±', 'æœ¨', 'çŸ³', 'é›²', 'æ˜Ÿ', 'å¤ªé™½', 'æœˆ', 'é¢¨', 'é›¨', 'é›ª',
            'ãƒ­ãƒœãƒƒãƒˆ', 'ã‚¢ãƒ³ãƒ‰ãƒ­ã‚¤ãƒ‰', 'ã‚µã‚¤ãƒœãƒ¼ã‚°', 'ã‚¨ã‚¤ãƒªã‚¢ãƒ³', 'å®‡å®™äºº', 'å¦–ç²¾', 'å¹½éœŠ', 'å¤©ä½¿', 'æ‚ªé­”', 'ç¥æ§˜',
            'ã‚¿ã‚¯ã‚·ãƒ¼', 'ãƒã‚¹', 'é£›è¡Œæ©Ÿ', 'èˆ¹', 'è‡ªè»¢è»Š', 'è»Š', 'ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼', 'ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚¿ãƒ¼',
            'å­¦æ ¡', 'ä¼šç¤¾', 'ç—…é™¢', 'éŠ€è¡Œ', 'éƒµä¾¿å±€', 'å›³æ›¸é¤¨', 'å…¬åœ’', 'ã‚¹ãƒ¼ãƒ‘ãƒ¼', 'ã‚³ãƒ³ãƒ“ãƒ‹', 'ã‚«ãƒ•ã‚§'
        ];

        const predicates = [
            'ã¯ãƒ¬ãƒ³ã‚¬ã§ã™', 'ãŒå›è»¢ã™ã‚‹', 'ãŒé³´ã‚Šã¾ã—ãŸ', 'ã¯ã‚ã‚Šã¾ã›ã‚“', 'ã«ã¤ã„ã¦è­°è«–ã—ã¦ã„ã¾ã™',
            'ãŒé€ƒã’ã¦ã„ãã¾ã™', 'ã‚’è¿½ã„ã‹ã‘ã¦ã¯ã„ã‘ã¾ã›ã‚“', 'ã ã‹ã‚‰ã§ã™', 'ã®ã‚ˆã†ã«é™ã£ã¦ã„ã¾ã™',
            'ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ', 'ã—ã‚ˆã†ã¨ã—ãŸã‚‰', 'ãŒå‡ºã¦ãã¾ã—ãŸ', 'ã¨è¨€ã„ã¾ã—ãŸ',
            'ã‚’ä¿å­˜ã—ã¾ã™', 'ãŒç™ºç”Ÿã—ã¾ã—ãŸ', 'ã‚’æŠ¼ã™ã¨', 'ã«ãªã‚Šã¾ã™', 'ã§ã™', 'ã‚’æ¢ã™ã“ã¨ã§ã™',
            'ãªã®ã§è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 'ã‚’é£Ÿã¹ã¦ãã ã•ã„', 'ãŒç¬‘ã£ã¦ã„ã‚‹', 'ã‚’æŒã£ã¦å‹•ã„ã¦ã„ã‚‹',
            'ã§æ³£ã„ã¦ã„ã‚‹', 'ã§æ›¸ã‹ã‚Œã¦ã„ãŸ', 'ã¯æ‹’å¦ã™ã‚‹', 'ãŒè¸Šã‚Šå‡ºã™', 'ã¨è¡¨ç¤ºã•ã‚Œã‚‹',
            'ã¯å­˜åœ¨ã—ãªã„', 'ã¨ã„ã†åå‰ã®', 'ã¯çµ‚ã‚ã‚‰ãªã„', 'ã—ã¦ã„ãªã„ã‹ã‚‰', 'ãŒè¶³ã‚Šã¾ã›ã‚“',
            'ãŒæº¶ã‘ã¦ã„ã¾ã™', 'ã¯é€æ˜ã§ã™', 'ãŒæ­Œã£ã¦ã„ã¾ã™', 'ã‚’éš ã—ã¦ã„ã¾ã™', 'ãŒå…‰ã£ã¦ã„ã¾ã™',
            'ã¯é‡ã™ãã¾ã™', 'ãŒæµ®ã„ã¦ã„ã¾ã™', 'ã‚’å¿˜ã‚Œã¾ã—ãŸ', 'ãŒè¨˜æ†¶ã—ã¦ã„ã¾ã™', 'ã¯å˜˜ã‚’ã¤ã„ã¦ã„ã¾ã™',
            'ãŒå¤‰å½¢ã—ã¾ã™', 'ã‚’åˆ†è§£ã—ã¾ã™', 'ãŒåˆä½“ã—ã¾ã™', 'ã¯æ°¸é ã§ã™', 'ãŒæ¶ˆæ»…ã—ã¾ã™',
            'ã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™', 'ãŒæš—å·åŒ–ã•ã‚Œã¦ã„ã¾ã™', 'ã‚’ãƒãƒƒã‚­ãƒ³ã‚°ã—ã¦ã„ã¾ã™', 'ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ã¾ã—ãŸ', 'ã‚’å†èµ·å‹•ã—ã¾ã™',
            'ãŒæ–™ç†ã—ã¦ã„ã¾ã™', 'ã‚’å‘³è¦‹ã—ã¾ã™', 'ãŒè…ã£ã¦ã„ã¾ã™', 'ã¯æ–°é®®ã§ã™', 'ã‚’å†·å‡ã—ã¾ã™',
            'ãŒè¿·å­ã«ãªã‚Šã¾ã—ãŸ', 'ã‚’æ¢ã—ã¦ã„ã¾ã™', 'ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 'ã¯è¡Œæ–¹ä¸æ˜ã§ã™'
        ];

        const modifiers = [
            'ç´«ã®', 'é’ã„', 'èµ¤ã„', 'ç·‘ã®', 'é»„è‰²ã„', 'é»’ã„', 'ç™½ã„', 'é€æ˜ãª', 'å…‰ã‚‹', 'æš—ã„',
            'æ˜æ—¥ã®', 'æ˜¨æ—¥ã®', 'ä»Šæ—¥ã®', 'æ¥é€±ã®', 'å…ˆæœˆã®', 'æ¥å¹´ã®', 'éå»ã®', 'æœªæ¥ã®',
            'ï¼—æ™‚ï¼“ï¼’åˆ†ã«', 'åˆå‰ä¸­ã«', 'æ·±å¤œã«', 'å¤•æ–¹ã«', 'æœã«', 'æ˜¼ã«', 'å¤œã«',
            'ã§ã‚‚', 'ãªãœãªã‚‰', 'ã‚‚ã—ã‹ã™ã‚‹ã¨', 'ãã£ã¨', 'ãŸã¶ã‚“', 'ã¾ã•ã‹', 'ã‚„ã¯ã‚Š',
            'çª“ã®å¤–ã§ã¯', 'éƒ¨å±‹ã®ä¸­ã§', 'åœ°ä¸‹ã§', 'å±‹ä¸Šã§', 'å»Šä¸‹ã§', 'éšæ®µã§', 'åº­ã§',
            'ä»£ã‚ã‚Šã«', 'åŒæ™‚ã«', 'é †ç•ªã«', 'é€†ã«', 'çªç„¶', 'ã‚†ã£ãã‚Šã¨', 'æ€¥ã„ã§'
        ];

        const connectors = [
            'ãã—ã¦', 'ã—ã‹ã—', 'ãªãœãªã‚‰', 'ã¨ã“ã‚ã§', 'ã™ã‚‹ã¨', 'ãã‚Œã‹ã‚‰', 'ã ã‹ã‚‰',
            'ã§ã‚‚', 'ã¾ãŸã¯', 'ã¤ã¾ã‚Š', 'ã•ã‚‰ã«', 'ã‚‚ã¡ã‚ã‚“', 'ã¡ãªã¿ã«', 'ãŠãã‚‰ã',
            'çªç„¶', 'åŒæ™‚ã«', 'ä¸€æ–¹ã§', 'çµæœçš„ã«', 'ãã‚Œã«ã—ã¦ã‚‚', 'ãã†ã„ãˆã°', 'ãªã‚“ã¨'
        ];

        // æ“¬ä¼¼ãƒ©ãƒ³ãƒ€ãƒ é–¢æ•°ï¼ˆæ—¥ä»˜ãƒ™ãƒ¼ã‚¹ï¼‰
        function seededRandom(seed) {
            let x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }

        function getSeededRandomElement(arr, seed) {
            const index = Math.floor(seededRandom(seed) * arr.length);
            return arr[index];
        }

        function getTodaysDate() {
            const today = new Date();
            return `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${today.getDate().toString().padStart(2, '0')}`;
        }

        function getTodaysSeed() {
            const dateStr = getTodaysDate();
            let hash = 0;
            for (let i = 0; i < dateStr.length; i++) {
                const char = dateStr.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // 32bitæ•´æ•°ã«å¤‰æ›
            }
            return Math.abs(hash);
        }

        function getRandomElement(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function generateSentence(useSeeded = false, seed = 0) {
            const getElement = useSeeded ? 
                (arr) => getSeededRandomElement(arr, seed + Math.floor(Math.random() * 1000)) :
                (arr) => getRandomElement(arr);

            const patterns = [
                () => `${getElement(subjects)}${getElement(predicates)}ã€‚`,
                () => `${getElement(modifiers)}${getElement(subjects)}${getElement(predicates)}ã€‚`,
                () => `${getElement(subjects)}ã¯ã€${getElement(subjects)}${getElement(predicates)}ã€ã¨è¨€ã„ã¾ã—ãŸã€‚`,
                () => `ã€${getElement(subjects)}${getElement(predicates)}ã€ã¨${getElement(subjects)}ãŒç­”ãˆã¾ã—ãŸã€‚`,
                () => `${getElement(subjects)}ã«ã€Œ${getElement(subjects)}${getElement(predicates)}ï¼Ÿã€ã¨èãã¾ã—ãŸã€‚`,
                () => `ã‚‚ã—${getElement(subjects)}${getElement(predicates)}ãªã‚‰ã€${getElement(subjects)}${getElement(predicates)}ã¯ãšã§ã™ã€‚`,
                () => `ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯${getElement(subjects)}ã«ã‚ˆã£ã¦é€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚`,
                () => `è¨ˆç®—çµæœï¼š${getElement(subjects)} Ã— ${getElement(subjects)} = ${Math.floor(Math.random() * 1000)}`,
                () => `${Math.floor(Math.random() * 24)}æ™‚${Math.floor(Math.random() * 60)}åˆ†ã«${getElement(subjects)}${getElement(predicates)}äºˆå®šã§ã™ã€‚`,
                () => `${getElement(subjects)}ã¨${getElement(subjects)}ãŒåŒæ™‚ã«${getElement(predicates)}ã€‚`
            ];

            return getElement(patterns)();
        }

        function generateNonsenseText(useSeeded = false, seed = 0) {
            const sentenceCount = 3 + (useSeeded ? Math.floor(seededRandom(seed + 999) * 4) : Math.floor(Math.random() * 4));
            let text = '';
            
            for (let i = 0; i < sentenceCount; i++) {
                if (i > 0 && (useSeeded ? seededRandom(seed + i * 100) : Math.random()) < 0.3) {
                    const connector = useSeeded ? 
                        getSeededRandomElement(connectors, seed + i * 50) : 
                        getRandomElement(connectors);
                    text += `${connector}ã€`;
                }
                text += generateSentence(useSeeded, seed + i * 10);
                if (i < sentenceCount - 1) {
                    text += ' ';
                }
            }
            
            return text;
        }

        // ãƒ¡ãƒ¢ãƒªå†…ãƒ‡ãƒ¼ã‚¿ç®¡ç†
        let dailyPostsToday = 0;
        let translationsData = [];

        function getTodaysKey() {
            return `daily-posts-${getTodaysDate()}`;
        }

        function getRemainingPosts() {
            return Math.max(0, dailyLimit - dailyPostsToday);
        }

        function incrementDailyPosts() {
            dailyPostsToday++;
        }

        function saveTranslation(original, translation, type = 'daily') {
            translationsData.unshift({
                id: Date.now(),
                date: new Date().toISOString(),
                original: original,
                translation: translation,
                type: type
            });
        }

        function getTranslations() {
            return translationsData;
        }

        // UIç®¡ç†
        function switchTab(tabName) {
            // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`${tabName}-tab`).classList.add('active');

            // å±¥æ­´ã‚¿ãƒ–ã®å ´åˆã¯å±¥æ­´ã‚’æ›´æ–°
            if (tabName === 'history') {
                updateHistoryDisplay();
            }
        }

        function updateStatusBar() {
            document.getElementById('current-date').textContent = getTodaysDate();
            document.getElementById('remaining-posts').textContent = getRemainingPosts();
            document.getElementById('total-translations').textContent = getTranslations().length;
        }

        function updateDailyUI() {
            const remaining = getRemainingPosts();
            const submitBtn = document.getElementById('submit-daily-btn');
            const warningDiv = document.getElementById('daily-limit-warning');
            
            if (remaining <= 0) {
                submitBtn.disabled = true;
                warningDiv.style.display = 'block';
            } else {
                submitBtn.disabled = false;
                warningDiv.style.display = 'none';
            }
        }

        function showSuccessMessage(elementId) {
            const messageDiv = document.getElementById(elementId);
            messageDiv.style.display = 'block';
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 3000);
        }

        // ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½
        function generateDailyChallenge() {
            const seed = getTodaysSeed();
            currentDailyText = generateNonsenseText(true, seed);
            document.getElementById('daily-challenge-text').textContent = currentDailyText;
        }

        function generatePracticeText() {
            currentPracticeText = generateNonsenseText(false);
            document.getElementById('practice-text').textContent = currentPracticeText;
        }

        function submitDailyTranslation() {
            const translation = document.getElementById('daily-translation').value.trim();
            if (!translation) {
                alert('ç¿»è¨³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼');
                return;
            }

            if (getRemainingPosts() <= 0) {
                alert('ä»Šæ—¥ã®æŠ•ç¨¿ä¸Šé™ã«é”ã—ã¦ã„ã¾ã™ï¼');
                return;
            }

            saveTranslation(currentDailyText, translation, 'daily');
            incrementDailyPosts();
            
            document.getElementById('daily-translation').value = '';
            updateStatusBar();
            updateDailyUI();
            showSuccessMessage('daily-success-message');
        }

        function savePracticeTranslation() {
            const translation = document.getElementById('practice-translation').value.trim();
            if (!translation) {
                alert('ç¿»è¨³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼');
                return;
            }

            saveTranslation(currentPracticeText, translation, 'practice');
            document.getElementById('practice-translation').value = '';
            updateStatusBar();
            alert('ç·´ç¿’ç¿»è¨³ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼');
        }

        function updateHistoryDisplay() {
            const translations = getTranslations();
            const historyDiv = document.getElementById('translation-history');
            
            if (translations.length === 0) {
                historyDiv.innerHTML = '<div class="empty-state">ã¾ã ç¿»è¨³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æœ€åˆã®ç¿»è¨³ã‚’æŠ•ç¨¿ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</div>';
                return;
            }

            historyDiv.innerHTML = translations.map(t => `
                <div class="history-entry">
                    <div class="history-date">
                        ${new Date(t.date).toLocaleDateString('ja-JP')} ${new Date(t.date).toLocaleTimeString('ja-JP')} 
                        (${t.type === 'daily' ? 'ä»Šæ—¥ã®ãŠé¡Œ' : 'ç·´ç¿’'})
                    </div>
                    <div class="history-original">åŸæ–‡: ${t.original}</div>
                    <div class="history-translation">${t.translation}</div>
                    <div class="share-buttons">
                        <button class="btn btn-info" onclick="copyTranslation('${t.id}')">ã‚³ãƒ”ãƒ¼</button>
                        <button class="btn btn-info" onclick="shareToTwitter('${t.id}')">Xã§ã‚·ã‚§ã‚¢</button>
                    </div>
                </div>
            `).join('');
        }

        // ã‚³ãƒ”ãƒ¼ãƒ»ã‚·ã‚§ã‚¢æ©Ÿèƒ½
        function copyText(text, successMessage = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼') {
            navigator.clipboard.writeText(text).then(() => {
                alert(successMessage);
            });
        }

        function copyDailyChallenge() {
            copyText(currentDailyText, 'ãŠé¡Œã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
        }

        function copyPracticeText() {
            copyText(currentPracticeText, 'ç·´ç¿’ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
        }

        function copyPracticeTranslation() {
            const translation = document.getElementById('practice-translation').value.trim();
            if (!translation) {
                alert('ç¿»è¨³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼');
                return;
            }
            copyText(translation, 'ç·´ç¿’ç¿»è¨³ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
        }

        function copyTranslation(translationId) {
            const translations = getTranslations();
            const translation = translations.find(t => t.id == translationId);
            if (translation) {
                copyText(translation.translation, 'ç¿»è¨³ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
            }
        }

        function shareToTwitter(translationId) {
            const translations = getTranslations();
            const translation = translations.find(t => t.id == translationId);
            if (!translation) return;

            const tweetText = `ğŸ“–ç„¡æ„å‘³ç¿»è¨³æ—¥è¨˜ğŸ“–\n\nåŸæ–‡: ${translation.original.substring(0, 50)}${translation.original.length > 50 ? '...' : ''}\n\nç¿»è¨³: ${translation.translation.substring(0, 100)}${translation.translation.length > 100 ? '...' : ''}\n\n#ç„¡æ„å‘³ç¿»è¨³æ—¥è¨˜ #å‰µä½œ`;
            
            const twitterURL = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;
            window.open(twitterURL, '_blank');
        }

        function shareDailyToTwitter() {
            const translation = document.getElementById('daily-translation').value.trim();
            if (!translation) {
                alert('ç¿»è¨³ã‚’å…¥åŠ›ã—ã¦ã‹ã‚‰å…±æœ‰ã—ã¦ãã ã•ã„ï¼');
                return;
            }

            const tweetText = `ğŸ“–ç„¡æ„å‘³ç¿»è¨³æ—¥è¨˜ğŸ“–\nä»Šæ—¥ã®ãŠé¡Œã«æŒ‘æˆ¦ï¼\n\nåŸæ–‡: ${currentDailyText.substring(0, 50)}${currentDailyText.length > 50 ? '...' : ''}\n\nç¿»è¨³: ${translation.substring(0, 100)}${translation.length > 100 ? '...' : ''}\n\n#ç„¡æ„å‘³ç¿»è¨³æ—¥è¨˜ #å‰µä½œ #ä»Šæ—¥ã®ãŠé¡Œ`;
            
            const twitterURL = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;
            window.open(twitterURL, '_blank');
        }

        function sharePracticeToTwitter() {
            const translation = document.getElementById('practice-translation').value.trim();
            if (!translation) {
                alert('ç¿»è¨³ã‚’å…¥åŠ›ã—ã¦ã‹ã‚‰å…±æœ‰ã—ã¦ãã ã•ã„ï¼');
                return;
            }

            const tweetText = `ğŸ“–ç„¡æ„å‘³ç¿»è¨³æ—¥è¨˜ğŸ“–\nç·´ç¿’ãƒ¢ãƒ¼ãƒ‰ã§ç¿»è¨³ã«æŒ‘æˆ¦ï¼\n\nåŸæ–‡: ${currentPracticeText.substring(0, 50)}${currentPracticeText.length > 50 ? '...' : ''}\n\nç¿»è¨³: ${translation.substring(0, 100)}${translation.length > 100 ? '...' : ''}\n\n#ç„¡æ„å‘³ç¿»è¨³æ—¥è¨˜ #å‰µä½œ #ç·´ç¿’`;
            
            const twitterURL = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}`;
            window.open(twitterURL, '_blank');
        }

        // åˆæœŸåŒ–
        function initialize() {
            generateDailyChallenge();
            generatePracticeText();
            updateStatusBar();
            updateDailyUI();
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–
        window.addEventListener('load', initialize);
    </script>
</body>
</html>